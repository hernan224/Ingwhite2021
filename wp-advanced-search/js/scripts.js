var __WPAS={FORM:"#wp-advanced-search.wpas-ajax-enabled",CONTAINER:"#wpas-results",INNER:"#wpas-results-inner",DEBUG_CONTAINER:"#wpas-debug",PAGE_FIELD:"#wpas-paged",FORM_ID:"",KEY_PREFIX:"wpasInstance_",HASH:"",STORAGE_KEY:function(){return this.KEY_PREFIX+this.FORM_ID}};jQuery(document).ready(function(t){__WPAS.FORM_ID=t("#wpas-id").val(),__WPAS.HASH=t(__WPAS.FORM).data("ajax-url-hash");var e=1;if(t("form.wpas-autosubmit :input").change(function(){t(this).parents("form").submit()}),t("button.wpas-clear").click(function(e){e.preventDefault(),t(this).parents("form").find(":input").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected"),t(this).parents("form.wpas-autosubmit").each(function(){return t(this).submit(),!1})}),t("input.wpas-reset").click(function(e){e.preventDefault(),t(this).parents("form")[0].reset(),t(this).parents("form.wpas-autosubmit").each(function(){return t(this).submit(),!1})}),0!=t(__WPAS.FORM).length)if(0!=t(__WPAS.CONTAINER).length){var a=!!t(__WPAS.FORM).hasClass("wpas-debug-enabled"),n=!!t(__WPAS.FORM).data("ajax-show-default"),s=a?500:0;if(a&&0==t(__WPAS.DEBUG_CONTAINER).length)d("WPAS_DEBUG is enabled but no container with ID #wpas-debug was found on this page.  Debug information cannot be shown.");else{var i={container:"wpas-load",load_btn:"wpas-load-btn",load_btn_text:"",load_img:"wpas-loading-img",load_img_url:"",init:function(e){this.load_btn_text=t(e).data("ajax-button"),this.load_img_url=t(e).data("ajax-loading"),t(__WPAS.CONTAINER).append(this.create())},create:function(){var t="<div id='wpas-load'>";return t+="<div><img id='"+this.load_img+"' style='display:none;' src='"+this.load_img_url+"'></div>",t+="<div><button id='"+this.load_btn+"' style='display:none;'>"+this.load_btn_text+"</button></div>",t+="</div>"},showButton:function(){t("#"+this.load_btn).addClass("active").show()},hideButton:function(){t("#"+this.load_btn).removeClass("active").hide()},showImage:function(){t("#"+this.load_img).show()},hideImage:function(){t("#"+this.load_img).hide()}};t(__WPAS.CONTAINER).append("<div id='wpas-results-inner'></div>"),i.init(__WPAS.FORM);var o=null;window.location.hash.slice(1)==__WPAS.HASH&&(o=JSON.parse(localStorage.getItem("wpasInstance_"+__WPAS.FORM_ID))),null!=o?(d("localStorage found"),function(){var e=localStorage.getItem(__WPAS.STORAGE_KEY());if(null==(e=JSON.parse(e)))return;e.form&&(a=e.form,t(__WPAS.FORM).find(":input").not(":button, :submit, :reset").each(function(){var e=a[t(this).attr("name")];"checkbox"==t(this).attr("type")?e.indexOf(t(this).val())>=0?t(this).prop("checked",!0):t(this).prop("checked",!1):t(this).val(e)}));var a;e.results&&(n=e.results,t(__WPAS.CONTAINER).html(n));var n;e.page&&u(e.page);e.request&&l(e.request)}()):(u(1),l(t(__WPAS.FORM).serialize())),0!=t(__WPAS.CONTAINER).length&&(null!=o?t(__WPAS.CONTAINER).html(o.results):n&&r(t(__WPAS.FORM).serialize(),e)),t(__WPAS.FORM).submit(function(a){a.preventDefault(),t(__WPAS.FORM).hasClass("wpas-locked")||(t(__WPAS.FORM).addClass("wpas-locked"),t(__WPAS.FORM).find("input:submit").attr("disabled","disabled"),function(a){u(1);var n=t(a).serialize();l(n),t(__WPAS.INNER).empty(),r(n,e)}(this))}),t(document).on("click","#"+i.load_btn+".active",function(t){u(parseInt(e)+1),r(REQUEST_DATA,e)})}}else d("No container with ID #wpas-results found on page.  Results cannot be shown");else d("No AJAX-enabled WPAS search form detected on page.");function r(a,n){i.hideButton(),i.showImage(),jQuery.ajax({type:"POST",url:WPAS_Ajax.ajaxurl,data:{action:"wpas_ajax_load",page:n,form_data:a},success:function(a,n,o){response=JSON.parse(a),setTimeout(function(){var a,n;a=__WPAS.INNER,n=response.results,t(a).append(n),i.hideImage(),function(e,a){t(e).html(a)}(__WPAS.DEBUG_CONTAINER,response.debug),e=response.current_page;var s,o=response.max_page;d("Current Page: "+e+", Max Page: "+o),0==o||e==o?i.hideButton():i.showButton(),window.location.hash=__WPAS.HASH,s={request:REQUEST_DATA,form:_(),results:t(__WPAS.CONTAINER).html(),page:e},s=JSON.stringify(s),localStorage.setItem(__WPAS.STORAGE_KEY(),s),t(__WPAS.FORM).removeClass("wpas-locked"),t(__WPAS.FORM).find("input:submit").removeAttr("disabled")},s)},error:function(t,e,a){console.log(a)}})}function _(){var e={};return t(__WPAS.FORM).find(":input").not(":button, :submit, :reset").each(function(){"checkbox"==t(this).attr("type")?e=function(e,a){var n=t(a).attr("name"),s=t(a).val();return void 0===e[n]&&(e[n]=[]),t(a).is(":checked")&&e[n].push(s),e}(e,this):e[t(this).attr("name")]=t(this).val()}),e}function u(a){e=a,t(__WPAS.PAGE_FIELD).val(a)}function l(t){REQUEST_DATA=t}function d(t){a&&console.log("WPAS: "+t)}});